<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="https://circuitlover.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://circuitlover.com/" rel="alternate" type="text/html" /><updated>2022-03-03T22:30:55+00:00</updated><id>https://circuitlover.com/feed.xml</id><title type="html">circuitlover.com</title><subtitle>A blog from Dinh-Tuyen Le.</subtitle><author><name>Dinh-Tuyen Le</name><email>tuyenld@circuitlover.com</email></author><entry><title type="html">Lifetime calculation for Electrolytic Capacitors</title><link href="https://circuitlover.com/capacitor-life-time-cal" rel="alternate" type="text/html" title="Lifetime calculation for Electrolytic Capacitors" /><published>2022-03-03T00:00:00+00:00</published><updated>2022-03-03T00:00:00+00:00</updated><id>https://circuitlover.com/capacitor-life-time-cal</id><content type="html" xml:base="https://circuitlover.com/capacitor-life-time-cal">&lt;p&gt;On the process of making new inverter/converter products, we are talking about what type of topology will be used, power losses and cost estimation. It is easy to forgot about the &lt;strong&gt;Lifetime of capacitors&lt;/strong&gt;. This article is quick note how to estimate lifetime of electrolytic capacitor (elcap) provided by &lt;strong&gt;JIANGHAI&lt;/strong&gt; &lt;sup id=&quot;fnref:fn1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:fn1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. Other manufactures may have different ways to estimate lifetime of these capacitors. Please look up manufacturer application note for more detail.&lt;/p&gt;

&lt;p&gt;Table of contents&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#lifetime-model&quot;&gt;Lifetime model&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#temperature-factor-k_t&quot;&gt;Temperature factor $K_T$&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ripple-current-factor-k_r&quot;&gt;Ripple current factor $K_R$&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#voltage-factor-k_v&quot;&gt;Voltage factor $K_V$&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#references&quot;&gt;References&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;lifetime-model&quot;&gt;Lifetime model&lt;/h1&gt;

&lt;p&gt;The lifetime $L$ of the electrolytic capacitor can be estimated by using numerical lifetime model:&lt;/p&gt;

\[L = L_0 \cdot K_T \cdot K_R \cdot K_V\]

&lt;p&gt;where&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;$L_0$ is specified lifetime from the datasheet of given capacitor at norminal ripple.&lt;/li&gt;
  &lt;li&gt;$K_T$ temperature factor (ambient temperature)&lt;/li&gt;
  &lt;li&gt;$K_R$ ripple current factor (self-heating)&lt;/li&gt;
  &lt;li&gt;$K_V$ voltage factor (operating voltage)&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;temperature-factor-k_t&quot;&gt;Temperature factor $K_T$&lt;/h1&gt;

&lt;p&gt;“10-Kelvin-rule” is wide used in the industry: a drop of the ambient temperature by $10K$ double the lifetime of capacitor.&lt;/p&gt;

&lt;p&gt;\(K_T = 2^{\cfrac {T_O - T_A}{10K}}\)
Where&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;$T_0$ rated temperature&lt;/li&gt;
  &lt;li&gt;$T_A$ ambient temperature&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;ripple-current-factor-k_r&quot;&gt;Ripple current factor $K_R$&lt;/h1&gt;

&lt;p&gt;\(K_R = K_i^{A \cdot \cfrac{\delta T_0}{10K}}\)
where&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;$A = 1 - (\frac{I_A}{I_R})^2$&lt;/li&gt;
  &lt;li&gt;$I_A$ ripple current in the application&lt;/li&gt;
  &lt;li&gt;$I_R$ rated ripple current&lt;/li&gt;
  &lt;li&gt;$\delta T_0$ core temperature increase of the elcap
    &lt;ul&gt;
      &lt;li&gt;$T_0=105 ^{\circ}C$ typ. 3.5~5K&lt;/li&gt;
      &lt;li&gt;$T_0 = 85 ^\circ C$ typ. 3.5~10K&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;$K_i$ empirical safety factor
    &lt;ul&gt;
      &lt;li&gt;$T_0=105 ^{\circ}C$ if ($I&amp;gt;I_R$) then $K_i = 4$ else $K_i = 2$&lt;/li&gt;
      &lt;li&gt;$T_0 = 85 ^\circ C \rightarrow K_i = 2$&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;voltage-factor-k_v&quot;&gt;Voltage factor $K_V$&lt;/h1&gt;

&lt;p&gt;If $0.6 \le \cfrac{U_A}{U_R} \le 1$ then
\(K_V = \left( \cfrac{U_A}{U_R} \right) ^{-2.5}\)
else
\(K_V = 3.59\)
where&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;$U_R$ rated voltage&lt;/li&gt;
  &lt;li&gt;$U_A$ actual operating voltage&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;references&quot;&gt;References&lt;/h1&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:fn1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Albertsen, A. 2010. Electrolytic capacitor lifetime estimation [Online]. JIANGHAI Eur. GmbH. Available: https://jianghai-europe.com/wp-content/uploads/Jianghai-Europe-E-Cap-Lifetime-Estimation-long-AAL-2018-09-18.pdf [Accessed March 3, 2022]. &lt;a href=&quot;#fnref:fn1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>Dinh-Tuyen Le</name><email>tuyenld@circuitlover.com</email></author><category term="pe" /><summary type="html">On the process of making new inverter/converter products, we are talking about what type of topology will be used, power losses and cost estimation. It is easy to forgot about the Lifetime of capacitors. This article is quick note how to estimate lifetime of electrolytic capacitor (elcap) provided by JIANGHAI 1. Other manufactures may have different ways to estimate lifetime of these capacitors. Please look up manufacturer application note for more detail. Albertsen, A. 2010. Electrolytic capacitor lifetime estimation [Online]. JIANGHAI Eur. GmbH. Available: https://jianghai-europe.com/wp-content/uploads/Jianghai-Europe-E-Cap-Lifetime-Estimation-long-AAL-2018-09-18.pdf [Accessed March 3, 2022]. &amp;#8617;</summary></entry><entry><title type="html">MOSFET and IGBT</title><link href="https://circuitlover.com/mosfet-igbt/" rel="alternate" type="text/html" title="MOSFET and IGBT" /><published>2022-02-13T00:00:00+00:00</published><updated>2022-02-13T00:00:00+00:00</updated><id>https://circuitlover.com/MOSFET</id><content type="html" xml:base="https://circuitlover.com/mosfet-igbt/">&lt;p&gt;Table of contents&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#n-channel-mosfet&quot;&gt;N-channel MOSFET&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#physical-view&quot;&gt;Physical view&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#electrical-view&quot;&gt;Electrical view&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#circuit-symbol&quot;&gt;Circuit symbol&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#references&quot;&gt;References&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;n-channel-mosfet&quot;&gt;N-channel MOSFET&lt;/h1&gt;

&lt;h2 id=&quot;physical-view&quot;&gt;Physical view&lt;/h2&gt;

&lt;p&gt;Current flows between diffusion terminals if the voltage on the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gate&lt;/code&gt; large enough to create a &lt;strong&gt;conducting channel&lt;/strong&gt;, otherwise the MOSFET is off and the diffusion terminals are not connected. &lt;sup id=&quot;fnref:ref1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:ref1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/mosfet/nmosfet-physical-view.png&quot; alt=&quot;physical view&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;electrical-view&quot;&gt;Electrical view&lt;/h2&gt;

&lt;p&gt;The four terminals of a Field Effect Transitor are &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gate&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Source&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Drain&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bulk&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/mosfet/nmosfet-electrical-view.png&quot; alt=&quot;electrical view&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;circuit-symbol&quot;&gt;Circuit symbol&lt;/h2&gt;

&lt;p&gt;MOSFET and JFET circuit symbols&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;P-channel&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/posts/mosfet/JFET_P-Channel_Labelled.svg&quot; alt=&quot;s&quot; /&gt;&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/posts/mosfet/IGFET_P-Ch_Enh_Labelled.svg&quot; alt=&quot;d&quot; /&gt;&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/posts/mosfet/IGFET_P-Ch_Enh_Labelled_simplified.svg&quot; alt=&quot;d&quot; /&gt;&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/posts/mosfet/Mosfet_P-Ch_Sedra.svg&quot; alt=&quot;f&quot; /&gt;&lt;/th&gt;
      &lt;th&gt;&lt;img src=&quot;/images/posts/mosfet/IGFET_P-Ch_Dep_Labelled.svg&quot; alt=&quot;f&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;N-channel&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/posts/mosfet/JFET_N-Channel_Labelled.svg&quot; alt=&quot;d&quot; /&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/posts/mosfet/IGFET_N-Ch_Enh_Labelled.svg&quot; alt=&quot;e&quot; /&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/posts/mosfet/IGFET_N-Ch_Enh_Labelled_simplified.svg&quot; alt=&quot;e&quot; /&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;/images/posts/mosfet/Mosfet_N-Ch_Sedra.svg&quot; alt=&quot;r&quot; /&gt;&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/posts/mosfet/IGFET_N-Ch_Dep_Labelled.svg&quot; alt=&quot;r&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;JFET (they are only in depletion mode)&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;MOSFET enhancement mode&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;MOSFET enhancement mode (no bulk)&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;MOSFET enhancement mode (no bulk)&lt;/td&gt;
      &lt;td&gt;MOSFET depletion mode (switched on)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;div class=&quot;tldr flex rounded-md bg-blue-300 bg-opacity-25 px-4 my-12&quot;&gt;
  &lt;div class=&quot;flex items-center&quot;&gt;
    &lt;div class=&quot;-ml-2 mr-2 my-6 transform rotate-90 tracking-tighter font-semibold text-blue-400&quot;&gt;TRICK&lt;/div&gt;
    &lt;p class=&quot;lg:text-lg leading-5 text-blue-800&quot;&gt;The arrow forms the pn junction from `buck` to `gate` in the symbol of MOSFET&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;When a channel exists in a MOSFET, current can flow from source to drain as well as from drain to source - it’s just a matter of how the device is connected in the circuit &lt;sup id=&quot;fnref:ref2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:ref2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. Conventional current flows from Drain to Source in an N Channel MOSFET.&lt;/p&gt;

&lt;h1 id=&quot;references&quot;&gt;References&lt;/h1&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:ref1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Chris Terman. &lt;em&gt;6.004 Computation Structures.&lt;/em&gt; Spring 2017. Massachusetts Institute of Technology: MIT OpenCourseWare, &lt;a href=&quot;https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017&quot;&gt;https://ocw.mit.edu&lt;/a&gt;. License: &lt;a href=&quot;https://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;Creative Commons BY-NC-SA&lt;/a&gt;. &lt;a href=&quot;#fnref:ref1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:ref2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Adam Lawrence (https://electronics.stackexchange.com/users/1293/adam-lawrence), In an NMOS, does current flow from source to drain or vice-versa?, URL (version: 2012-11-11): https://electronics.stackexchange.com/q/48671 &lt;a href=&quot;#fnref:ref2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>Dinh-Tuyen Le</name><email>tuyenld@circuitlover.com</email></author><category term="pe" /><summary type="html">Table of contents N-channel MOSFET Physical view Electrical view Circuit symbol References</summary></entry><entry><title type="html">Complex number and its application in AC analysist</title><link href="https://circuitlover.com/complex-number-application/" rel="alternate" type="text/html" title="Complex number and its application in AC analysist" /><published>2022-02-10T00:00:00+00:00</published><updated>2022-02-10T00:00:00+00:00</updated><id>https://circuitlover.com/sinusoidal-and-complex-number</id><content type="html" xml:base="https://circuitlover.com/complex-number-application/">&lt;p&gt;Table of contents&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#1-sinusoidal-time-functions-and-complex-number&quot;&gt;1. Sinusoidal time functions and complex number&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#11-complex-number-recap&quot;&gt;1.1. Complex number recap&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#12-sinusoidal-time-functions&quot;&gt;1.2. Sinusoidal Time Functions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#13-summary&quot;&gt;1.3. Summary&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-impedance&quot;&gt;2. Impedance&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#example&quot;&gt;Example&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;1-sinusoidal-time-functions-and-complex-number&quot;&gt;1. Sinusoidal time functions and complex number&lt;/h2&gt;

&lt;h3 id=&quot;11-complex-number-recap&quot;&gt;1.1. Complex number recap&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/representation-of-the-complex-number.png&quot; alt=&quot;represenation of the complex number&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Magnitude and phase angle of the complex number $\underline{z}$ is &lt;sup id=&quot;fnref:ref1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:ref1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

\[|\underline{z}|=\sqrt{x^{2}+y^{2}} \qquad 
\phi=\arctan \left(\frac{y}{x}\right)\]

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Euler&lt;/code&gt; relation&lt;/p&gt;

\[e^{j \phi}=\cos (\phi)+j \sin (\phi) \qquad 
\underline{z}=x+j y=|\underline{z}| e^{j \phi}\]

&lt;p&gt;The product and the ratio of two complex numbers are&lt;/p&gt;

\[\underline{z}_{1}=\left|\underline{z}_{1}\right| e^{j \phi_{1}} \qquad
\underline{z}_{2}=\left|\underline{z}_{2}\right| e^{j \phi_{2}}
\qquad
\underline{z}_{1} \underline{z}_{2}=\left|\underline{z}_{1}\right|\left|\underline{z}_{2}\right| e^{j\left(\phi_{1}+\phi_{2}\right)}
\qquad
\frac{\underline{z}_{1}}{\underline{z}_{2}}=\frac{\left|\underline{z}_{1}\right|}{\left|\underline{z}_{2}\right|} e^{j\left(\phi_{1}-\phi_{2}\right)}\]

&lt;p&gt;The complex conjugate of a complex number is given by&lt;/p&gt;

\[\underline{z}=x+j y
\quad
z^{*}=x-j y
\qquad
\underline{z}+\underline{z}^{*}=2 \operatorname{Re}(\underline{z})=2 x
\qquad
\underline{z}-\underline{z}^{*}=2 j \operatorname{Im}(\underline{z})=2 j y\]

&lt;h3 id=&quot;12-sinusoidal-time-functions&quot;&gt;1.2. Sinusoidal Time Functions&lt;/h3&gt;

&lt;p&gt;A sinusoidal function of time might be written in three ways&lt;/p&gt;

\[f(t)=A \cos (\omega t+\phi) \qquad (1)\]

\[f(t)=B \cos (\omega t)+C \sin (\omega t) \qquad (2)\]

\[f(t)=\underline{X} e^{j \omega t}+\underline{X}^{*} e^{-j \omega t} \qquad (3)\]

&lt;p&gt;Equation &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(3)&lt;/code&gt; makes sure that that the resulting function is real. Now, let find out the relationship between equation &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(1) and (3)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Let say&lt;/p&gt;

\[\underline{X}=|\underline{X}| e^{j \psi}\]

&lt;p&gt;then
\(f(t) =|\underline{X}| e^{j \psi} e^{j \omega t}+|\underline{X}|^{*} e^{-j \psi} e^{-j \omega t} =|\underline{X}| e^{j(\psi+\omega t)}+|\underline{X}|^{*} e^{-j(\psi+\omega t)}\)&lt;/p&gt;

\[f(t)=2|\underline{X}| \cos (\omega t+\psi)\]

&lt;p&gt;so we have&lt;/p&gt;

\[|\underline{X}| =\frac{A}{2} \qquad \psi =\phi\]

&lt;p&gt;Next, finding the relationship between equation &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(2) and (3)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Alternatively, we could write&lt;/p&gt;

\[\underline{X}=x+j y 
\qquad \text{where} \quad
x=|\underline{X}| \cos (\psi)
\qquad
y=|\underline{X}| \sin (\psi)\]

&lt;p&gt;thus&lt;/p&gt;

\[f(t)=\underline{X} e^{j \omega t}+\underline{X}^{*} e^{-j \omega t} = x\left(e^{j \omega t}+e^{-j \omega t}\right)+j y\left(e^{j \omega t}-e^{-j \omega t}\right)\]

\[f(t) =2 x \cos (\omega t)-2 y \sin (\omega t)\]

&lt;p&gt;Finally, we get&lt;/p&gt;

\[B = 2x \qquad C = -2y \qquad \underline{X} = \frac{B}{2} - j \frac{C}{2}\]

&lt;h3 id=&quot;13-summary&quot;&gt;1.3. Summary&lt;/h3&gt;

&lt;p&gt;Since 
\((\underline{X} e^{j \omega t})^{*} = \underline{X}^{*} e^{-j \omega t}\)&lt;/p&gt;

&lt;p&gt;expression &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(3) and (4)&lt;/code&gt; are equivalent. It is advantageous to use one or the other of them, according to circumstances.&lt;br /&gt;
It’s easy to notice that $\underline{X}$ is time-independent. This conclusion is used when forming the relationship between voltage and current of inductor and capacitor elements.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Sinusoidal form&lt;/th&gt;
      &lt;th&gt;Complex number form&lt;/th&gt;
      &lt;th&gt;$\underline{X}$&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;$f(t)=A \cos (\omega t+\phi)$&lt;/td&gt;
      &lt;td&gt;$f(t)=\underline{X} e^{j \omega t}+\underline{X}^{*} e^{-j \omega t} \quad (3)$&lt;/td&gt;
      &lt;td&gt;$\underline{X}={A}/{2} \angle \phi$&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$f(t)=B \cos (\omega t)+C \sin (\omega t)$&lt;/td&gt;
      &lt;td&gt;$f(t)=Re(2\underline{X} e^{j \omega t}) = Re(A e^{j \phi} e^{j \omega t})\quad (4)$&lt;/td&gt;
      &lt;td&gt;$\underline{X} = {B}/{2} - j {C}/{2}$&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;Strategy&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Transform the input &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;In&lt;/code&gt; into complex polar form $In \angle \phi$&lt;/li&gt;
  &lt;li&gt;Calculate impedance complex number $Z$&lt;/li&gt;
  &lt;li&gt;Transform output &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Out&lt;/code&gt; into polar form $O \angle \alpha$&lt;/li&gt;
  &lt;li&gt;Using expression &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(4)&lt;/code&gt; to find out $Out(t)$&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;2-impedance&quot;&gt;2. Impedance&lt;/h2&gt;
&lt;p&gt;Consider two elements, inductances and capacitances.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Inducatance    (L)&lt;/th&gt;
      &lt;th&gt;Capacitance (C)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/posts/Leading_lagging.jpg&quot; alt=&quot;inductor&quot; /&gt;&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/posts/Leading_lagging.jpg&quot; alt=&quot;capacitor&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Current is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lagging&lt;/code&gt; voltage. (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;L&lt;/code&gt; means &lt;em&gt;Lower&lt;/em&gt; :arrow_lower_right:)&lt;/td&gt;
      &lt;td&gt;Current is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;leading&lt;/code&gt; voltage&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$v_L = L {di}/{dt}$&lt;/td&gt;
      &lt;td&gt;$i = C \; {dV_C}/{dt}$&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$v = \underline{V}e^{j \omega t} + \underline{V}^{*} e^{-j \omega t}$&lt;/td&gt;
      &lt;td&gt;$i = \underline{I}e^{j \omega t} + \underline{I}^{*} e^{-j \omega t}$&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;$\underline{V}=j \omega L \underline{I} = \underline{Z}_L \; \underline{I} \quad \text{where } \underline{Z}_L = j \omega L$&lt;/td&gt;
      &lt;td&gt;$\underline{I}=j \omega C \underline{V} = \underline{V} / \underline{Z}_C \quad \text{where } \underline{Z}_C = 1 / (j \omega C)$&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The inverse of impedance is &lt;strong&gt;admittance&lt;/strong&gt;&lt;/p&gt;

\[\underline{Y} = 1/ \underline{Z}\]

&lt;h3 id=&quot;example&quot;&gt;Example&lt;/h3&gt;
&lt;p&gt;Suppose we are to find the voltage $v(t)$ in the network, in which $i(t) = I cos(\omega t)$
&lt;img src=&quot;/images/posts/complex-circuit-ex.png&quot; alt=&quot;complex number in circuit example&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Step 1.&lt;/code&gt; Transform the input &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;In&lt;/code&gt; into complex polar form $In \angle \phi$&lt;/p&gt;

\[i(t) = Re(I e^{\omega t})\]

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Step 2.&lt;/code&gt; Calculate impedance complex number 
\(Z \| = \frac{R j \omega L}{R + j \omega L} = \frac{R \omega L}{\sqrt{R^2 + (\omega L)^2}} \angle (arctan \frac{R}{\omega L})\)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/complex-circuit-ex-phasor.jpg&quot; alt=&quot;phasor&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Step 3. &lt;/code&gt; We found the output voltage in the polar-exponential form&lt;/p&gt;

\[V = Z \| I = \frac{IR \omega L}{\sqrt{R^2 + (\omega L)^2}} \angle (arctan \frac{R}{\omega L})\]

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Step 4.&lt;/code&gt; Using expression &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(4)&lt;/code&gt; to find out $v(t)$&lt;/p&gt;

\[v(t) = \frac{IR \omega L}{\sqrt{R^2 + (\omega L)^2}} cos ( \omega t + arctan \frac{R}{\omega L})\]

&lt;p&gt;&lt;strong&gt;References&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:ref1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;James Kirtley Jr.. &lt;em&gt;6.061 Introduction to Electric Power Systems.&lt;/em&gt; Spring 2011. Massachusetts Institute of Technology: MIT OpenCourseWare, &lt;a href=&quot;https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-061-introduction-to-electric-power-systems-spring-2011&quot;&gt;https://ocw.mit.edu&lt;/a&gt;. License: &lt;a href=&quot;https://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;Creative Commons BY-NC-SA&lt;/a&gt;. &lt;a href=&quot;#fnref:ref1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>Dinh-Tuyen Le</name><email>tuyenld@circuitlover.com</email></author><category term="pe" /><summary type="html">Table of contents 1. Sinusoidal time functions and complex number 1.1. Complex number recap 1.2. Sinusoidal Time Functions 1.3. Summary 2. Impedance Example</summary></entry><entry><title type="html">Connect Raspberry Pi Zero (not W) to the Internet</title><link href="https://circuitlover.com/connect-Pi-Zero-to-internet" rel="alternate" type="text/html" title="Connect Raspberry Pi Zero (not W) to the Internet" /><published>2020-12-11T00:00:00+00:00</published><updated>2020-12-11T00:00:00+00:00</updated><id>https://circuitlover.com/connect-Pi-Zero-to-internet</id><content type="html" xml:base="https://circuitlover.com/connect-Pi-Zero-to-internet">&lt;p&gt;Raspi Zero (not W) have neither Wi-Fi nor Ethernet, so how could we want to update our board on the fly? 
Well, we can create a virtual Ethernet interface. I’ll show you how to do it.&lt;/p&gt;

&lt;p&gt;The network topology I’m going to deploy it as follows.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/Pi-Zero-internet.jpg&quot; alt=&quot;Pi Zero Internet&quot; /&gt;&lt;/p&gt;

&lt;p&gt;First, you need to run this script. It will create a virtual UDC ethernet interface.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# https://www.isticktoit.net/?p=1383&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;CONFIG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/sys/kernel/config/usb_gadget/piwebcam
&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$CONFIG&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$CONFIG&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;1

&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;0x1d6b &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; idVendor &lt;span class=&quot;c&quot;&gt;# Linux Foundation&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;0x0104 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; idProduct &lt;span class=&quot;c&quot;&gt;# Multifunction Composite Gadget&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;0x0100 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; bcdDevice &lt;span class=&quot;c&quot;&gt;# v1.0.0&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;0x0200 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; bcdUSB &lt;span class=&quot;c&quot;&gt;# USB2&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; strings/0x409
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;fedcba9876543210&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; strings/0x409/serialnumber
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Tobias Girstmair&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; strings/0x409/manufacturer
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;iSticktoit.net USB Device&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; strings/0x409/product
&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; configs/c.1/strings/0x409
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Config 1: ECM network&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; configs/c.1/strings/0x409/configuration
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;250 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; configs/c.1/MaxPower
&lt;span class=&quot;c&quot;&gt;# Add functions here&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# see gadget configurations below&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# End functions&lt;/span&gt;
udevadm settle &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 5 &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; :
&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; /sys/class/udc &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; UDC

&lt;span class=&quot;c&quot;&gt;# Ethernet Adapter&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#-------------------------------------------&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Add functions here&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; functions/ecm.usb0
&lt;span class=&quot;c&quot;&gt;# first byte of address must be even&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;48:6f:73:74:50:43&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &quot;HostPC&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;SELF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;42:61:64:55:53:42&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# &quot;BadUSB&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$HOST&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; functions/ecm.usb0/host_addr
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SELF&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; functions/ecm.usb0/dev_addr
&lt;span class=&quot;nb&quot;&gt;ln&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; functions/ecm.usb0 configs/c.1/
&lt;span class=&quot;c&quot;&gt;# End functions&lt;/span&gt;
udevadm settle &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 5 &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; :
&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; /sys/class/udc &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; UDC
&lt;span class=&quot;c&quot;&gt;#put this at the very end of the file:&lt;/span&gt;
ifconfig usb0 10.0.0.1 netmask 255.255.255.252 up
route add &lt;span class=&quot;nt&quot;&gt;-net&lt;/span&gt; default gw 10.0.0.2

&lt;span class=&quot;c&quot;&gt;# USB Mass storage&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#-------------------------------------------&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Add functions here&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;FILE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/dev/mmcblk0p2
&lt;span class=&quot;c&quot;&gt;# FILE=/home/pi/usbdisk.img&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# mkdir -p ${FILE/img/d}&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# mount -o loop,ro,offset=1048576 -t ext4 $FILE ${FILE/img/d} # FOR OLD WAY OF MAKING THE IMAGE&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# mount -o loop,ro, -t vfat $FILE ${FILE/img/d} # FOR IMAGE CREATED WITH DD&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; functions/mass_storage.usb0
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;0 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; functions/mass_storage.usb0/stall
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;1 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;functions/mass_storage.usb0/lun.0/removable
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;0 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; functions/mass_storage.usb0/lun.0/cdrom
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;0 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; functions/mass_storage.usb0/lun.0/ro
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;0 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; functions/mass_storage.usb0/lun.0/nofua
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$FILE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; functions/mass_storage.usb0/lun.0/file
&lt;span class=&quot;nb&quot;&gt;ln&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; functions/mass_storage.usb0 configs/c.1/
&lt;span class=&quot;c&quot;&gt;# End functions&lt;/span&gt;
udevadm settle &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 5 &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; :
&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; /sys/class/udc &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; UDC

&lt;span class=&quot;c&quot;&gt;# REMOVE USB Mass Storage&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# rm configs/c.1/mass_storage.usb0&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# rm -rf functions/mass_storage.usb0&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, try to ping from your Pi to the host PC &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ping 10.0.0.2&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You created another network, so you need to “register” it to your router.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;## Add route to your Gateway Network&lt;/span&gt;
ldtuyen@pc:~&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ssh root@172.16.10.1
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Enter username and password]

root@OpenWrt:~# route &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt;
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.1.1     0.0.0.0         UG    0      0        0 eth0.2
172.16.10.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0.2
root@OpenWrt:~# ip route add 10.0.0.0/24 via 172.16.10.159
root@OpenWrt:~# 
root@OpenWrt:~# route &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt;
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.1.1     0.0.0.0         UG    0      0        0 eth0.2
10.0.0.0        172.16.10.159   255.255.255.0   UG    0      0        0 br-lan
172.16.10.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0.2
root@OpenWrt:~# 

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Try to ping from your Pi to Google &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ping 8.8.8.8&lt;/code&gt;. If it fails, you may be need to check your network topology.&lt;/p&gt;

&lt;p&gt;In order to use the Internet, the DNS server of your Raspberry Pi need to be changed.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /etc/resolv.conf
&lt;span class=&quot;c&quot;&gt;# Generated by resolvconf&lt;/span&gt;
nameserver 8.8.8.8 
nameserver fe80::3e47:11ff:fe87:fc43%wlan0
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ping google.com
PING google.com &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;172.217.24.46&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 56&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;84&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; bytes of data.
64 bytes from hkg07s23-in-f46.1e100.net &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;172.217.24.46&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;115 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;23.8 ms
64 bytes from hkg07s23-in-f46.1e100.net &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;172.217.24.46&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;nv&quot;&gt;icmp_seq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2 &lt;span class=&quot;nv&quot;&gt;ttl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;115 &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;23.6 ms
^C
&lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt; google.com ping statistics &lt;span class=&quot;nt&quot;&gt;---&lt;/span&gt;
2 packets transmitted, 2 received, 0% packet loss, &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;1001ms
rtt min/avg/max/mdev &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 23.672/23.750/23.829/0.172 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Done! Now you could use the Internet on your Pi Zero.&lt;/p&gt;</content><author><name>Dinh-Tuyen Le</name><email>tuyenld@circuitlover.com</email></author><category term="pi" /><summary type="html">Raspi Zero (not W) have neither Wi-Fi nor Ethernet, so how could we want to update our board on the fly? Well, we can create a virtual Ethernet interface. I’ll show you how to do it.</summary></entry><entry><title type="html">How to upgrade flash chip on TPLink TL-WR840N v5.</title><link href="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb" rel="alternate" type="text/html" title="How to upgrade flash chip on TPLink TL-WR840N v5." /><published>2019-02-11T00:00:00+00:00</published><updated>2019-02-11T00:00:00+00:00</updated><id>https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb</id><content type="html" xml:base="https://circuitlover.com/upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb">&lt;p&gt;Upgrade TP-Link flash chip on TP-Link from 4mb to 8mb&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Table of content&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#1-pre-requirement&quot;&gt;1. Pre-requirement&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-lets-do-it&quot;&gt;2. Let’s do it&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#21-desolder-old-flash-chip&quot;&gt;2.1 Desolder old flash chip&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#22-program-new-flash-chip&quot;&gt;2.2 Program new flash chip&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#23-re-solder-new-flash-chip&quot;&gt;2.3 Re-solder new flash chip&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-enjoy&quot;&gt;3. Enjoy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;1-pre-requirement&quot;&gt;1. Pre-requirement&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;New flash chip: I used Winbond 8MiB GD25Q64CSIG&lt;/li&gt;
  &lt;li&gt;Soldering iron: desolder old flash chip and re-solder new flash chip&lt;/li&gt;
  &lt;li&gt;ROM programer and IC socket: I am using CH-341A (~ 5$)&lt;/li&gt;
  &lt;li&gt;One PC/Laptop&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;2-lets-do-it&quot;&gt;2. Let’s do it&lt;/h2&gt;
&lt;h3 id=&quot;21-desolder-old-flash-chip&quot;&gt;2.1 Desolder old flash chip&lt;/h3&gt;
&lt;p&gt;Hot air soldering station is ideally suited for desoldering flash. If you not, you can follow this video to do this.&lt;/p&gt;

&lt;div class=&quot;embed-responsive aspect-w-16 aspect-h-9&quot;&gt;
  &lt;iframe class=&quot;embed-responsive-item&quot; src=&quot;https://www.youtube.com/embed/nZGEtpECPQY&quot; frameborder=&quot;0&quot; allow=&quot;autoplay; encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;h3 id=&quot;22-program-new-flash-chip&quot;&gt;2.2 Program new flash chip&lt;/h3&gt;
&lt;p&gt;Firstly, you need to choose new flash chip you want to replace. Why I chose &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Winbond GD25Q64CSIG&lt;/code&gt; for replacement, see table bellow:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/tuyenld/acb0f0e62cadca73b7dffc44d7cc1b4b.js?file=Original_vs_Mod_Chip.md&quot;&gt;&lt;/script&gt;

&lt;p&gt;I see the name of flash chip is the same, so I didn’t checked datasheet for compatible.&lt;/p&gt;

&lt;p&gt;Secondly, you need to choose OpenWRT firmware.
Why I used openwrt-18.06.1-ramips-mt76x8-tl-&lt;strong&gt;wr841n-v13&lt;/strong&gt;-squashfs-sysupgrade instead of openwrt-18.06.1-ramips-mt76x8-tl-&lt;strong&gt;wr840n-v5&lt;/strong&gt;-squashfs-sysupgrade?&lt;/p&gt;

&lt;p&gt;Because it used the same CPU and different in flash and RAM chip.
&lt;script src=&quot;https://gist.github.com/tuyenld/acb0f0e62cadca73b7dffc44d7cc1b4b.js?file=WR841Nv13_vs_WR840Nv5.md&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;div class=&quot;tldr flex rounded-md bg-blue-300 bg-opacity-25 px-4 my-12&quot;&gt;
  &lt;div class=&quot;flex items-center&quot;&gt;
    &lt;div class=&quot;-ml-2 mr-2 my-6 transform rotate-90 tracking-tighter font-semibold text-blue-400&quot;&gt;NOTE&lt;/div&gt;
    &lt;p class=&quot;lg:text-lg leading-5 text-blue-800&quot;&gt;You are able to use openwrt-18.06.1-ramips-mt76x8-tl-**wr840n-v5**-squashfs-sysupgrade with 8MB flash chip, your router still booting but you can not any configuration after reboot. You may got error `Your image is probably too big, leaving not enough space for jffs2`.&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;In the first time, I faced this problem. I can not save any configuration after reboot. If you look at boot log, it read:
&lt;script src=&quot;https://gist.github.com/tuyenld/acb0f0e62cadca73b7dffc44d7cc1b4b.js?file=firmware_bad.log&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;No &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/overlay&lt;/code&gt; will be mounted:
&lt;script src=&quot;https://gist.github.com/tuyenld/acb0f0e62cadca73b7dffc44d7cc1b4b.js?file=firmware_bad_no_overlay.log&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;If everything is good, it should be like this:
&lt;script src=&quot;https://gist.github.com/tuyenld/acb0f0e62cadca73b7dffc44d7cc1b4b.js?file=firmware_good.log&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Now, you have new flash chip and suitable firware, but you can not use this firware to program new flash chip. Because &lt;strong&gt;RAW&lt;/strong&gt; flash need more partion than firmware such as: bootloader and art. See more in &lt;a href=&quot;https://openwrt.org/docs/techref/flash.layout&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can use bellow shell script to generate firmware for any flash with different capacity.
&lt;script src=&quot;https://gist.github.com/tuyenld/acb0f0e62cadca73b7dffc44d7cc1b4b.js?file=create_new_firmware.sh&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/tuyenld/acb0f0e62cadca73b7dffc44d7cc1b4b.js?file=flash_partition.md&quot;&gt;&lt;/script&gt;

&lt;p&gt;If you don’t want to use this script, you can create image by yourself. You may to need hex editor like &lt;a href=&quot;https://mh-nexus.de/en/hxd/&quot;&gt;HxDen&lt;/a&gt; to do this.&lt;/p&gt;
&lt;figure class=&quot;align-center&quot;&gt;
  &lt;img src=&quot;https://res.cloudinary.com/crushcoding/image/upload/q_auto,f_auto/2019-02-11-upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/create_image_manual.jpg&quot; alt=&quot;&quot; /&gt;
  &lt;figcaption&gt;New firmware layout&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;All file which I used in &lt;a href=&quot;https://drive.google.com/file/d/1kqXvFQYrolipvrrD3Rkv7J7JTZwgVHDn/view?usp=sharing&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;23-re-solder-new-flash-chip&quot;&gt;2.3 Re-solder new flash chip&lt;/h3&gt;
&lt;p&gt;After use CH341A to program new flash chip, you can re-solder new flash chip on target board.&lt;/p&gt;

&lt;div class=&quot;tldr flex rounded-md bg-blue-300 bg-opacity-25 px-4 my-12&quot;&gt;
  &lt;div class=&quot;flex items-center&quot;&gt;
    &lt;div class=&quot;-ml-2 mr-2 my-6 transform rotate-90 tracking-tighter font-semibold text-blue-400&quot;&gt;NOTE&lt;/div&gt;
    &lt;p class=&quot;lg:text-lg leading-5 text-blue-800&quot;&gt;If your board can not booting, don't worry. You can use [Clip Socket Adapter](https://www.ebay.com/itm/SOIC8-SOP8-Flash-Chip-IC-Test-Clip-Socket-Adapter-BIOS-CH341A-USB-Programmer-/372555847443) to try program flash again with out desolder chip.&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;3-enjoy&quot;&gt;3. Enjoy&lt;/h2&gt;
&lt;figure class=&quot;align-center&quot;&gt;
  &lt;img src=&quot;https://res.cloudinary.com/crushcoding/image/upload/q_auto,f_auto/2019-02-11-upgrade-flash-chip-tplink-tl-wr840n-4mb-to-8mb/software_status.jpg&quot; alt=&quot;&quot; /&gt;
  &lt;figcaption&gt;Software with new flash chip (8MB).&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;div class=&quot;tldr flex rounded-md bg-blue-300 bg-opacity-25 px-4 my-12&quot;&gt;
  &lt;div class=&quot;flex items-center&quot;&gt;
    &lt;div class=&quot;-ml-2 mr-2 my-6 transform rotate-90 tracking-tighter font-semibold text-blue-400&quot;&gt;NOTE&lt;/div&gt;
    &lt;p class=&quot;lg:text-lg leading-5 text-blue-800&quot;&gt;I used image come from **TL-WR841N v13.x**, except for LED will not working, everything work well (Wi-Fi, Ethernet, Router feature).&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</content><author><name>Dinh-Tuyen Le</name><email>tuyenld@circuitlover.com</email></author><category term="uncategorized" /><category term="TL-WR840N" /><summary type="html">Upgrade TP-Link flash chip on TP-Link from 4mb to 8mb</summary></entry></feed>